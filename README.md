
# Flask Jenkins CI/CD Pipeline

## –û–ø–∏—Å–∞–Ω–∏–µ
–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–æ—Å—Ç–æ–µ Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –æ–¥–Ω–∏–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–º –∏ —Ç–µ—Å—Ç–∞–º–∏.  
–ü—Ä–æ–µ–∫—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å Jenkins –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –∫–æ–¥–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≤ –≤–∏–¥–µ systemd-—Å–µ—Ä–≤–∏—Å–∞.

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ app.py                  # Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ requirements.txt        # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ tests.py                 # –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ Jenkinsfile              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Jenkins Pipeline
‚îî‚îÄ‚îÄ README.md
```

---

## üöÄ –û–ø–∏—Å–∞–Ω–∏–µ CI/CD –ø—Ä–æ—Ü–µ—Å—Å–∞

### –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å –≤–∫–ª—é—á–∞–µ—Ç:
1. –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–¥–∞ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.
2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.
3. –ù–∞—Å—Ç—Ä–æ–π–∫—É –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è (venv).
4. –£—Å—Ç–∞–Ω–æ–≤–∫—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
5. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤.
6. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ systemd.
7. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞.

---

## ‚öôÔ∏è –û–∫—Ä—É–∂–µ–Ω–∏—è
–ü–∞–π–ø–ª–∞–π–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

- **dev** ‚Äî –º–æ–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∏–∑ –ª—é–±–æ–π –≤–µ—Ç–∫–∏.
- **prod** ‚Äî –º–æ–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑ –≤–µ—Ç–∫–∏ `main`.

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø–∞–π–ø–ª–∞–π–Ω–∞ –≤ Jenkins –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `ENV` (dev/prod).

---

## üì¶ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã (GCP VM)

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Ä–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:

```
/opt/flask-jenkins
```

### 2. –ü—Ä–∞–≤–∞ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
–ü–∞–ø–∫–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é Jenkins:

```bash
sudo chown -R jenkins:jenkins /opt/flask-jenkins
```

---

## üß∞ –ó–∞–ø—É—Å–∫ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –∫–∞–∫ systemd-—Å–µ—Ä–≤–∏—Å:

### –§–∞–π–ª —Å–µ—Ä–≤–∏—Å–∞
`/etc/systemd/system/flask-jenkins.service`

### –ü—Ä–∏–º–µ—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
```ini
[Unit]
Description=Flask Jenkins Application
After=network.target

[Service]
User=jenkins
WorkingDirectory=/opt/flask-jenkins
ExecStart=/opt/flask-jenkins/venv/bin/python /opt/flask-jenkins/app.py --host=0.0.0.0 --port=5001
Restart=always

[Install]
WantedBy=multi-user.target
```

### –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
```bash
sudo systemctl start flask-jenkins     # –ó–∞–ø—É—Å–∫
sudo systemctl stop flask-jenkins      # –û—Å—Ç–∞–Ω–æ–≤–∫–∞
sudo systemctl restart flask-jenkins   # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
sudo systemctl status flask-jenkins    # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
```

---

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Jenkins
### –ü–∞–π–ø–ª–∞–π–Ω
–ü—Ä–æ—Ü–µ—Å—Å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –ø–æ–º–æ—â—å—é Jenkins Pipeline, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ:

```
Jenkinsfile
```

### –≠—Ç–∞–ø—ã
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–¥–∞ (git pull)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ systemd-—Å–µ—Ä–≤–∏—Å–∞
- –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---|---|---|
| ENV | –û–∫—Ä—É–∂–µ–Ω–∏–µ (dev/prod) | dev, prod |

### –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫
–ö–∞–∂–¥—ã–π –ø—É—à –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤—ã–∑—ã–≤–∞–µ—Ç –∑–∞–ø—É—Å–∫ Jenkins Pipeline —á–µ—Ä–µ–∑ GitHub Webhook.

---

## üì¨ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
–ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—é –∫–∞–∂–¥–æ–≥–æ –±–∏–ª–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π:
- –°—Ç–∞—Ç—É—Å –±–∏–ª–¥–∞ (—É—Å–ø–µ—Ö/–æ—à–∏–±–∫–∞)
- –•–µ—à –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–æ–º–º–∏—Ç–∞
- –ê–≤—Ç–æ—Ä –∫–æ–º–º–∏—Ç–∞
- –í–µ—Ç–∫–∞
- –í—ã–±—Ä–∞–Ω–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (dev/prod)

---

## üìé –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ systemd-—Å–µ—Ä–≤–∏—Å–∞
sudo journalctl -u flask-jenkins -f
